
# Домашнее задание к занятию 1.  «Введение в виртуализацию. Типы и функции гипервизоров. Обзор рынка вендоров и областей применения»


## Как сдавать задания

Обязательны к выполнению задачи без звёздочки. Их нужно выполнить, чтобы получить зачёт и диплом о профессиональной переподготовке.

Задачи со звёздочкой (*) — это дополнительные задачи и/или задачи повышенной сложности. Их выполнять не обязательно, но они помогут вам глубже понять тему.

Домашнее задание выполняйте в файле readme.md в GitHub-репозитории. В личном кабинете отправьте на проверку ссылку на .md-файл в вашем репозитории.

Любые вопросы по решению задач задавайте в чате учебной группы.

---

## Важно

Перед отправкой работы на проверку удаляйте неиспользуемые ресурсы.
Это нужно, чтобы не расходовать средства, полученные в результате использования промокода.

Подробные рекомендации [здесь](https://github.com/netology-code/virt-homeworks/blob/virt-11/r/README.md).

---

## Задача 1

Опишите кратко, в чём основное отличие полной (аппаратной) виртуализации, паравиртуализации и виртуализации на основе ОС.

Кратко:

Аппаратная виртуализация — виртуализация с поддержкой специальной процессорной архитектуры. В отличие от программной виртуализации с помощью данной техники возможно использование изолированных гостевых операционных систем, управляемых гипервизором напрямую. Гостевая ОС не зависит от архитектуры хостовой платформы и реализации платформы виртуализации. Т.е. не требуется никакая модификация гостевой ОС.

При паравиртуализации — гостевые операционные системы подготавливаются для исполнения в виртуализированной среде, для чего их ядро незначительно модифицируется. Операционная система взаимодействует с программой гипервизора, который предоставляет ей гостевой API, вместо использования напрямую таких ресурсов, как таблица страниц памяти. Код, касающийся виртуализации, локализуется непосредственно в операционную систему. Паравиртуализация таким образом требует, чтобы гостевая операционная система была изменена для гипервизора, и это является недостатком метода. 

При виртуализации на основе ОС, гостевая ОС не имеет собственного ядра, поэтому использует ядро хоста.

## Задача 2

Выберите один из вариантов использования организации физических серверов в зависимости от условий использования.

Организация серверов:

- физические сервера,
- паравиртуализация,
- виртуализация уровня ОС.

Условия использования:

- высоконагруженная база данных, чувствительная к отказу;
- различные web-приложения;
- Windows-системы для использования бухгалтерским отделом;
- системы, выполняющие высокопроизводительные расчёты на GPU.

Опишите, почему вы выбрали к каждому целевому использованию такую организацию.

Ответ: 
Высоконагруженная база данных, чувствительная к отказу - выбрал бы физический сервер без виртуализации. Потому что это bestpractice. Максимальная производительность, избежание затрат на виртуализацию.

Различные web-приложения - Виртулизация уровня ОС, вполне можно поднять в докере , отличная производительность, удобство развёртывания и сопровождения.
Windows - системы для использования бухгалтерским отделом - можно запустить в Hyper V под Windows , вопросы с лицензией на Windows проще решаются, а HyperV это паравиртуализация 

Системы, выполняющие высокопроизводительные расчёты на GPU - запускал бы на физическом сервере, если nvidia то с установленными драйверами CUDA, хорошая производительность, отличная поддержка от производителя GPU.


## Задача 3

Выберите подходящую систему управления виртуализацией для предложенного сценария. Детально опишите ваш выбор.

Сценарии:

1. 100 виртуальных машин на базе Linux и Windows, общие задачи, нет особых требований. Преимущественно Windows based-инфраструктура, требуется реализация программных балансировщиков нагрузки, репликации данных и автоматизированного механизма создания резервных копий.
2. Требуется наиболее производительное бесплатное open source-решение для виртуализации небольшой (20-30 серверов) инфраструктуры на базе Linux и Windows виртуальных машин.
3. Необходимо бесплатное, максимально совместимое и производительное решение для виртуализации Windows-инфраструктуры.
4. Необходимо рабочее окружение для тестирования программного продукта на нескольких дистрибутивах Linux.

Ответ:
1. Можно использовать решения от Microsoft , например на Windows Server (а) ставить Hyper-V. Простота использования, низкий порог вхождения. Хотя возможно использования и Vmware esxi (Windows будет работать нормально). Все требуемые функции поддерживаются из коробки.

2. Подойдёт KVM open source решение. Особо здесь выбирать не приходится, это пожалуй будет лучшим выбором (не единственный), но KVM имеет вполне хорошую поддержку и опыт использования есть.

3. Чистый HyperV будет бесплатен, либо Vmware Esxi (но у него в бесплатном варианте  есть ограничение на ресурсы, если их хватает то вполне хорошее и простое решение с веб-интерфейсом, развернуть будет даже проще чем HyperV ставить на голое железо.

4. Здесь docker , отлично годится для создания рабочего и тестового окружения. 

## Задача 4

Опишите возможные проблемы и недостатки гетерогенной среды виртуализации (использования нескольких систем управления виртуализацией одновременно) и что необходимо сделать для минимизации этих рисков и проблем. Если бы у вас был выбор, создавали бы вы гетерогенную среду или нет? Мотивируйте ваш ответ примерами.

Кратко:
Чем больше зоопарк технология, тем больше вероятности ошибки его поддержки, больше скилов требуется или специалистов чтобы это всё поддерживать.
Чтобы минимизировать риски и проблемы, необходимо прежде всего разработчикам начать переписывать своё ПО для работы в других средах. Например, переписать веб приложение под докер и запускать его уже в докере.
Мой если бы был выбор, то всё запускал бы в докер контейнерах, а в идеале развёрнул в облаке через Terraform (но это не точно, скилов здесь нет, поэтому к kubernetes и подобным вещам отношусь настороженно),  к сожалению не все приложения имеют поддержку докера, а СУБД вообще не очень то и рекомендуется запускать в таком режиме если речь идёт про прод, а не про тестовую среду или среду для разработчиков.
Пример, как бы я делал веб приложение:
Веб приложение с микросервисами, каждый микросервис запускается в докер контейнере (есть возможность уйти в облако при необходимости),  СУБД находятся на физических машинах резервирование данных обеспечивается средствами которые предоставляет СУБД. Микросервисы легковесны, их просто запускать и поддерживать, общаются между собой асинхронно через брокером сообщений/событий (Kafka, RabbitMQ) , сами микросервисы должны быть спроектированы как  stateless т.е. не хранят своё состояние (в соответствии с Twelve Factor App) , соответственно приложение будет масштабируемо при необходимости и простое в обслуживании. 
Настройка простая, не будет физических серверов  "снежинок" и т.д.

